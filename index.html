<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Mining using dplyr, ggplot2, and Other Tidy Tools • tidytext</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Text Mining using dplyr, ggplot2, and Other Tidy Tools">
<meta property="og:description" content="Using tidy data principles can make many text mining tasks
    easier, more effective, and consistent with tools already in wide use.
    Much of the infrastructure needed for text mining with tidy data
    frames already exists in packages like dplyr, broom, tidyr, and
    ggplot2. In this package, we provide functions and supporting data
    sets to allow conversion of text to and from tidy formats, and to
    switch seamlessly between tidy tools and existing text mining
    packages.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">tidytext</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/tidytext.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/topic_modeling.html">Tidy Topic Modeling</a>
    </li>
    <li>
      <a href="articles/tf_idf.html">Term Frequency and Inverse Document Frequency (tf-idf) Using Tidy Data Principles</a>
    </li>
    <li>
      <a href="articles/tidying_casting.html">Converting to and from Document-Term Matrix and Corpus objects</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/juliasilge/tidytext/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="tidytext-text-mining-using-tidy-tools-">tidytext: Text mining using tidy tools <img src="reference/figures/tidytext.png" align="right"><a class="anchor" aria-label="anchor" href="#tidytext-text-mining-using-tidy-tools-"></a>
</h1></div>
<p><strong>Authors:</strong> <a href="https://juliasilge.com/" class="external-link">Julia Silge</a>, <a href="http://varianceexplained.org/" class="external-link">David Robinson</a><br><strong>License:</strong> <a href="https://opensource.org/licenses/MIT" class="external-link">MIT</a></p>
<!-- badges: start -->
<p>Using <a href="https://doi.org/10.18637/jss.v059.i10" class="external-link">tidy data principles</a> can make many text mining tasks easier, more effective, and consistent with tools already in wide use. Much of the infrastructure needed for text mining with tidy data frames already exists in packages like <a href="https://cran.r-project.org/package=dplyr" class="external-link">dplyr</a>, <a href="https://cran.r-project.org/package=broom" class="external-link">broom</a>, <a href="https://cran.r-project.org/package=tidyr" class="external-link">tidyr</a>, and <a href="https://cran.r-project.org/package=ggplot2" class="external-link">ggplot2</a>. In this package, we provide functions and supporting data sets to allow conversion of text to and from tidy formats, and to switch seamlessly between tidy tools and existing text mining packages. Check out <a href="https://www.tidytextmining.com/" class="external-link">our book</a> to learn more about text mining using tidy data principles.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install this package from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"tidytext"</span><span class="op">)</span></span></code></pre></div>
<p>Or you can install the development version from GitHub with <a href="https://github.com/r-lib/remotes" class="external-link">remotes</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span></span>
<span><span class="fu">install_github</span><span class="op">(</span><span class="st">"juliasilge/tidytext"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="tidy-text-mining-example-the-unnest_tokens-function">Tidy text mining example: the <code>unnest_tokens</code> function<a class="anchor" aria-label="anchor" href="#tidy-text-mining-example-the-unnest_tokens-function"></a>
</h3>
<p>The novels of Jane Austen can be so tidy! Let’s use the text of Jane Austen’s 6 completed, published novels from the <a href="https://cran.r-project.org/package=janeaustenr" class="external-link">janeaustenr</a> package, and transform them to a tidy format. janeaustenr provides them as a one-row-per-line format:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/janeaustenr" class="external-link">janeaustenr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">original_books</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/janeaustenr/man/austen_books.html" class="external-link">austen_books</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">book</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>line <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">original_books</span></span>
<span><span class="co">#&gt; # A tibble: 73,422 × 3</span></span>
<span><span class="co">#&gt;    text                    book                 line</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;                   &lt;fct&gt;               &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 "SENSE AND SENSIBILITY" Sense &amp; Sensibility     1</span></span>
<span><span class="co">#&gt;  2 ""                      Sense &amp; Sensibility     2</span></span>
<span><span class="co">#&gt;  3 "by Jane Austen"        Sense &amp; Sensibility     3</span></span>
<span><span class="co">#&gt;  4 ""                      Sense &amp; Sensibility     4</span></span>
<span><span class="co">#&gt;  5 "(1811)"                Sense &amp; Sensibility     5</span></span>
<span><span class="co">#&gt;  6 ""                      Sense &amp; Sensibility     6</span></span>
<span><span class="co">#&gt;  7 ""                      Sense &amp; Sensibility     7</span></span>
<span><span class="co">#&gt;  8 ""                      Sense &amp; Sensibility     8</span></span>
<span><span class="co">#&gt;  9 ""                      Sense &amp; Sensibility     9</span></span>
<span><span class="co">#&gt; 10 "CHAPTER 1"             Sense &amp; Sensibility    10</span></span>
<span><span class="co">#&gt; # … with 73,412 more rows</span></span></code></pre></div>
<p>To work with this as a tidy dataset, we need to restructure it as <strong>one-token-per-row</strong> format. The <code><a href="reference/unnest_tokens.html">unnest_tokens()</a></code> function is a way to convert a dataframe with a text column to be one-token-per-row:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/juliasilge/tidytext" class="external-link">tidytext</a></span><span class="op">)</span></span>
<span><span class="va">tidy_books</span> <span class="op">&lt;-</span> <span class="va">original_books</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="reference/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tidy_books</span></span>
<span><span class="co">#&gt; # A tibble: 725,055 × 3</span></span>
<span><span class="co">#&gt;    book                 line word       </span></span>
<span><span class="co">#&gt;    &lt;fct&gt;               &lt;int&gt; &lt;chr&gt;      </span></span>
<span><span class="co">#&gt;  1 Sense &amp; Sensibility     1 sense      </span></span>
<span><span class="co">#&gt;  2 Sense &amp; Sensibility     1 and        </span></span>
<span><span class="co">#&gt;  3 Sense &amp; Sensibility     1 sensibility</span></span>
<span><span class="co">#&gt;  4 Sense &amp; Sensibility     3 by         </span></span>
<span><span class="co">#&gt;  5 Sense &amp; Sensibility     3 jane       </span></span>
<span><span class="co">#&gt;  6 Sense &amp; Sensibility     3 austen     </span></span>
<span><span class="co">#&gt;  7 Sense &amp; Sensibility     5 1811       </span></span>
<span><span class="co">#&gt;  8 Sense &amp; Sensibility    10 chapter    </span></span>
<span><span class="co">#&gt;  9 Sense &amp; Sensibility    10 1          </span></span>
<span><span class="co">#&gt; 10 Sense &amp; Sensibility    13 the        </span></span>
<span><span class="co">#&gt; # … with 725,045 more rows</span></span></code></pre></div>
<p>This function uses the <a href="https://docs.ropensci.org/tokenizers/" class="external-link">tokenizers</a> package to separate each line into words. The default tokenizing is for words, but other options include characters, n-grams, sentences, lines, paragraphs, or separation around a regex pattern.</p>
<p>Now that the data is in a one-word-per-row format, we can manipulate it with tidy tools like dplyr. We can remove stop words (available via the function <code><a href="reference/get_stopwords.html">get_stopwords()</a></code>) with an <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_books</span> <span class="op">&lt;-</span> <span class="va">tidy_books</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join</a></span><span class="op">(</span><span class="fu"><a href="reference/get_stopwords.html">get_stopwords</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>We can also use <code><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count()</a></code> to find the most common words in all the books as a whole.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tidy_books</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="co">#&gt; # A tibble: 14,375 × 2</span></span>
<span><span class="co">#&gt;    word      n</span></span>
<span><span class="co">#&gt;    &lt;chr&gt; &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1 mr     3015</span></span>
<span><span class="co">#&gt;  2 mrs    2446</span></span>
<span><span class="co">#&gt;  3 must   2071</span></span>
<span><span class="co">#&gt;  4 said   2041</span></span>
<span><span class="co">#&gt;  5 much   1935</span></span>
<span><span class="co">#&gt;  6 miss   1855</span></span>
<span><span class="co">#&gt;  7 one    1831</span></span>
<span><span class="co">#&gt;  8 well   1523</span></span>
<span><span class="co">#&gt;  9 every  1456</span></span>
<span><span class="co">#&gt; 10 think  1440</span></span>
<span><span class="co">#&gt; # … with 14,365 more rows</span></span></code></pre></div>
<p>Sentiment analysis can be implemented as an inner join. Three sentiment lexicons are available via the <code><a href="reference/get_sentiments.html">get_sentiments()</a></code> function. Let’s examine how sentiment changes across each novel. Let’s find a sentiment score for each word using the Bing lexicon, then count the number of positive and negative words in defined sections of each novel.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"bing"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6,786 × 2</span></span>
<span><span class="co">#&gt;    word        sentiment</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt;    </span></span>
<span><span class="co">#&gt;  1 2-faces     negative </span></span>
<span><span class="co">#&gt;  2 abnormal    negative </span></span>
<span><span class="co">#&gt;  3 abolish     negative </span></span>
<span><span class="co">#&gt;  4 abominable  negative </span></span>
<span><span class="co">#&gt;  5 abominably  negative </span></span>
<span><span class="co">#&gt;  6 abominate   negative </span></span>
<span><span class="co">#&gt;  7 abomination negative </span></span>
<span><span class="co">#&gt;  8 abort       negative </span></span>
<span><span class="co">#&gt;  9 aborted     negative </span></span>
<span><span class="co">#&gt; 10 aborts      negative </span></span>
<span><span class="co">#&gt; # … with 6,776 more rows</span></span>
<span></span>
<span><span class="va">janeaustensentiment</span> <span class="op">&lt;-</span> <span class="va">tidy_books</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="fu"><a href="reference/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"bing"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"word"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">book</span>, index <span class="op">=</span> <span class="va">line</span> <span class="op"><a href="https://rdrr.io/r/base/Arithmetic.html" class="external-link">%/%</a></span> <span class="fl">80</span>, <span class="va">sentiment</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span><span class="va">sentiment</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sentiment <span class="op">=</span> <span class="va">positive</span> <span class="op">-</span> <span class="va">negative</span><span class="op">)</span></span>
<span></span>
<span><span class="va">janeaustensentiment</span></span>
<span><span class="co">#&gt; # A tibble: 920 × 5</span></span>
<span><span class="co">#&gt;    book                index negative positive sentiment</span></span>
<span><span class="co">#&gt;    &lt;fct&gt;               &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Sense &amp; Sensibility     0       16       32        16</span></span>
<span><span class="co">#&gt;  2 Sense &amp; Sensibility     1       19       53        34</span></span>
<span><span class="co">#&gt;  3 Sense &amp; Sensibility     2       12       31        19</span></span>
<span><span class="co">#&gt;  4 Sense &amp; Sensibility     3       15       31        16</span></span>
<span><span class="co">#&gt;  5 Sense &amp; Sensibility     4       16       34        18</span></span>
<span><span class="co">#&gt;  6 Sense &amp; Sensibility     5       16       51        35</span></span>
<span><span class="co">#&gt;  7 Sense &amp; Sensibility     6       24       40        16</span></span>
<span><span class="co">#&gt;  8 Sense &amp; Sensibility     7       23       51        28</span></span>
<span><span class="co">#&gt;  9 Sense &amp; Sensibility     8       30       40        10</span></span>
<span><span class="co">#&gt; 10 Sense &amp; Sensibility     9       15       19         4</span></span>
<span><span class="co">#&gt; # … with 910 more rows</span></span></code></pre></div>
<p>Now we can plot these sentiment scores across the plot trajectory of each novel.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">janeaustensentiment</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">index</span>, <span class="va">sentiment</span>, fill <span class="op">=</span> <span class="va">book</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, show.legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">book</span>, ncol <span class="op">=</span> <span class="fl">2</span>, scales <span class="op">=</span> <span class="st">"free_x"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="100%"></p>
<p>For more examples of text mining using tidy data frames, see the tidytext vignette.</p>
</div>
<div class="section level3">
<h3 id="tidying-document-term-matrices">Tidying document term matrices<a class="anchor" aria-label="anchor" href="#tidying-document-term-matrices"></a>
</h3>
<p>Some existing text mining datasets are in the form of a DocumentTermMatrix class (from the tm package). For example, consider the corpus of 2246 Associated Press articles from the topicmodels dataset.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://tm.r-forge.r-project.org/" class="external-link">tm</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"AssociatedPress"</span>, package <span class="op">=</span> <span class="st">"topicmodels"</span><span class="op">)</span></span>
<span><span class="va">AssociatedPress</span></span>
<span><span class="co">#&gt; &lt;&lt;DocumentTermMatrix (documents: 2246, terms: 10473)&gt;&gt;</span></span>
<span><span class="co">#&gt; Non-/sparse entries: 302031/23220327</span></span>
<span><span class="co">#&gt; Sparsity           : 99%</span></span>
<span><span class="co">#&gt; Maximal term length: 18</span></span>
<span><span class="co">#&gt; Weighting          : term frequency (tf)</span></span></code></pre></div>
<p>If we want to analyze this with tidy tools, we need to transform it into a one-row-per-term data frame first with a <code><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy()</a></code> function. (For more on the tidy verb, <a href="https://broom.tidymodels.org/" class="external-link">see the broom package</a>).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">AssociatedPress</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 302,031 × 3</span></span>
<span><span class="co">#&gt;    document term       count</span></span>
<span><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1        1 adding         1</span></span>
<span><span class="co">#&gt;  2        1 adult          2</span></span>
<span><span class="co">#&gt;  3        1 ago            1</span></span>
<span><span class="co">#&gt;  4        1 alcohol        1</span></span>
<span><span class="co">#&gt;  5        1 allegedly      1</span></span>
<span><span class="co">#&gt;  6        1 allen          1</span></span>
<span><span class="co">#&gt;  7        1 apparently     2</span></span>
<span><span class="co">#&gt;  8        1 appeared       1</span></span>
<span><span class="co">#&gt;  9        1 arrested       1</span></span>
<span><span class="co">#&gt; 10        1 assault        1</span></span>
<span><span class="co">#&gt; # … with 302,021 more rows</span></span></code></pre></div>
<p>We could find the most negative documents:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ap_sentiments</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">AssociatedPress</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="fu"><a href="reference/get_sentiments.html">get_sentiments</a></span><span class="op">(</span><span class="st">"bing"</span><span class="op">)</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"word"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">document</span>, <span class="va">sentiment</span>, wt <span class="op">=</span> <span class="va">count</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span><span class="va">sentiment</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>sentiment <span class="op">=</span> <span class="va">positive</span> <span class="op">-</span> <span class="va">negative</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">sentiment</span><span class="op">)</span></span></code></pre></div>
<p>Or we can join the Austen and AP datasets and compare the frequencies of each word:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">AssociatedPress</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span>word <span class="op">=</span> <span class="va">term</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>AP <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">inner_join</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">tidy_books</span>, <span class="va">word</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>Austen <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>AP <span class="op">=</span> <span class="va">AP</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">AP</span><span class="op">)</span>,</span>
<span>         Austen <span class="op">=</span> <span class="va">Austen</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Austen</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparison</span></span>
<span><span class="co">#&gt; # A tibble: 4,730 × 3</span></span>
<span><span class="co">#&gt;    word             AP     Austen</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;         &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 abandoned 0.000170  0.00000493</span></span>
<span><span class="co">#&gt;  2 abide     0.0000291 0.0000197 </span></span>
<span><span class="co">#&gt;  3 abilities 0.0000291 0.000143  </span></span>
<span><span class="co">#&gt;  4 ability   0.000238  0.0000148 </span></span>
<span><span class="co">#&gt;  5 able      0.000664  0.00151   </span></span>
<span><span class="co">#&gt;  6 abroad    0.000194  0.000178  </span></span>
<span><span class="co">#&gt;  7 abrupt    0.0000291 0.0000247 </span></span>
<span><span class="co">#&gt;  8 absence   0.0000776 0.000547  </span></span>
<span><span class="co">#&gt;  9 absent    0.0000436 0.000247  </span></span>
<span><span class="co">#&gt; 10 absolute  0.0000533 0.000128  </span></span>
<span><span class="co">#&gt; # … with 4,720 more rows</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://scales.r-lib.org" class="external-link">scales</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">comparison</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">AP</span>, <span class="va">Austen</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">word</span><span class="op">)</span>, check_overlap <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            vjust <span class="op">=</span> <span class="fl">1</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_x_log10</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent_format</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_abline</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="100%"></p>
<p>For more examples of working with objects from other text mining packages using tidy data principles, see the <a href="https://juliasilge.github.io/tidytext/articles/tidying_casting.html" class="external-link">vignette</a> on converting to and from document term matrices.</p>
</div>
<div class="section level3">
<h3 id="community-guidelines">Community Guidelines<a class="anchor" aria-label="anchor" href="#community-guidelines"></a>
</h3>
<p>This project is released with a <a href="https://github.com/juliasilge/tidytext/blob/main/CONDUCT.md" class="external-link">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms. Feedback, bug reports (and fixes!), and feature requests are welcome; file issues or seek support <a href="https://github.com/juliasilge/tidytext/issues" class="external-link">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=tidytext" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/juliasilge/tidytext/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/juliasilge/tidytext/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing tidytext</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>David Robinson <br><small class="roles"> Author </small>  </li>
<li>Julia Silge <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-3671-836X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/juliasilge/tidytext/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/juliasilge/tidytext/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://cran.r-project.org/package=tidytext" class="external-link"><img src="https://www.r-pkg.org/badges/version/tidytext" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/web/checks/check_results_tidytext.html" class="external-link"><img src="https://cranchecks.info/badges/summary/tidytext" alt="cran checks"></a></li>
<li><a href="https://app.codecov.io/gh/juliasilge/tidytext?branch=main" class="external-link"><img src="https://codecov.io/gh/juliasilge/tidytext/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://zenodo.org/badge/latestdoi/22224/juliasilge/tidytext" class="external-link"><img src="https://zenodo.org/badge/22224/juliasilge/tidytext.svg" alt="DOI"></a></li>
<li><a href="https://joss.theoj.org/papers/10.21105/joss.00037" class="external-link"><img src="https://joss.theoj.org/papers/10.21105/joss.00037/status.svg" alt="JOSS"></a></li>
<li><a href="https://CRAN.R-project.org/package=tidytext" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/tidytext" alt="Downloads"></a></li>
<li><a href="https://CRAN.R-project.org/package=tidytext" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/tidytext?color=orange" alt="Total Downloads"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by David Robinson, Julia Silge.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
